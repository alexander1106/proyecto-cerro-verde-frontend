<div class="container">
  <app-header></app-header>

  <div class="contenido">
    <div class="profile-container">
      <h2>Perfil de Usuario</h2>

      <div class="profile-card">
        <!-- Sección izquierda del perfil -->
        <div class="profile-left">
          <img [src]="user.perfil" alt="Foto de perfil" class="foto-perfil" />
          <h3>{{ user.nombre }} {{ user.apellidos }}</h3>

          <div class="profile-buttons">
            <button class="btn btn-cambiar" (click)="mostrarFormularioCambio = false">Datos personales</button>
            <button class="btn btn-cambiar" (click)="mostrarFormularioCambio = !mostrarFormularioCambio">Cambiar contraseña</button>
          </div>
        </div>

        <!-- Sección derecha del perfil -->
        <div class="profile-right">
          <!-- Mostrar datos si no está cambiando la contraseña -->
          <ng-container *ngIf="!mostrarFormularioCambio; else formularioCambio">
            <form class="profile-section-form">
              <div class="profile-section">
                <label for="username">Username:</label>
                <input id="username" type="text" [(ngModel)]="user.username" name="username" />

                <label for="nombre">Nombre:</label>
                <input id="nombre" type="text" [(ngModel)]="user.nombre" name="nombre" />

                <label for="apellidos">Apellidos:</label>
                <input id="apellidos" type="text" [(ngModel)]="user.apellidos" name="apellidos" />
              </div>

              <div class="profile-section">
                <label for="telefono">Teléfono:</label>
                <input id="telefono" type="text" [(ngModel)]="user.telefono" name="telefono" />

                <label for="email">Correo:</label>
                <input id="email" type="email" [(ngModel)]="user.email" name="email" />

                <label for="rol">Rol:</label>
                <input id="rol" type="text" [value]="user.rol.nombreRol" disabled />
              </div>

              <button type="button" class="btn-primary">Guardar cambios</button>
            </form>
          </ng-container>

          <!-- Formulario de cambio de contraseña -->
          <ng-template #formularioCambio>
            <div class="form-cambio-password">
              <label for="actual">Contraseña actual:</label>
              <input type="password" id="actual" [(ngModel)]="passwordActual" />

              <label for="nueva">Nueva contraseña:</label>
              <input type="password" id="nueva" [(ngModel)]="nuevaPassword" />

              <button class="btn-primary" (click)="cambiarPassword()">Guardar</button>
            </div>
            <div *ngIf="mensajeCambio" class="mensaje">{{ mensajeCambio }}</div>
          </ng-template>
        </div>

      </div>
    </div>
  </div>
</div>
